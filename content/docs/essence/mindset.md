---
weight: 31
title: "生成AIの適切な扱い方"
description: "生成AIと付き合う姿勢を理解する"
icon: "Reminder"
date: "2024-01-20T05:57:52+09:00"
lastmod: "2024-01-20T05:57:52+09:00"
draft: false
toc: true
---

{{% alert icon="" context="info" %}}
生成AIを上手に活用できれば多くの恩恵を受けることができます。しかし現在の生成AIには従来の技術に見られなかった限界や課題があります。  
<strong>まずは「上手な扱い方」よりも「適切な扱い方」を先に理解しましょう。</strong>ここでは最低限、生成AIを適切に扱うための方法を紹介します。  
{{% /alert %}}

{{< table "table-responsive" >}}
| 日時 | このページで使用した生成AI | 
|----------|--------------|
| 2024/1/20 | ChatGPT(GPT-3.5) |
{{< /table >}}

<br>

## 👍 基本的な姿勢
---

### - 生成物を提案として扱う

生成AIの出力には誤りや嘘が含まれている可能性があります。例えば、生成AIが以下の文章を出力しました。  

火星人に出会うまでの5ステップです。  

{{% alert icon="🤖" context="success" %}}
1. ポータルの発見:
物語の冒頭で、主人公たちは地球と火星をつなぐ不思議なポータルを偶然にしてしまいます。このポータルは科学者やエンジニアたちによって詳細に調査され、安全に利用できるようになるまでの展開が物語の始まりです。

2. 神秘的なおまじないの力:
ポータルを通じて火星に到達した主人公たちは、火星の文化や生態系を理解するために、火星人の神秘的なおまじないの力を学びます。これらのおまじないは火星人とのコミュニケーションや共感を可能にし、物語の中で重要な役割を果たします。

3. 火星の秘宝の探索:
火星に到達した主人公たちは、火星の奥深くに隠された伝説の秘宝を探し始めます。この秘宝は火星人の文化や知識を集めるために必要な鍵となり、物語の中で様々な冒険と謎解きが繰り広げられます。

4. 火星人との交流:
主人公たちは秘宝を手に入れたことで火星人との交流の機会を得ます。火星人は主人公たちに火星の秘密を教え、地球と火星の協力関係を築くために共同作業を開始します。この交流は異なる文化や価値観を探求する面白い要素を提供します。

5. ポータルの安全な利用:
物語のクライマックスでは、ポータルの利用が安全になり、地球と火星の間で自由な行き来が可能になります。主人公たちは火星人との友情や協力を持ち帰り、地球と火星の未来を共に築くための新たな時代を切り開きます。
{{% /alert %}}

この回答を仕事や教育の現場で「真実」「正しい内容」として扱うことは難しいでしょう。  
また利用者が有用な使い方を知らないだけで、生成AIが悪いわけではないにもかかわらず、誤りや嘘を含む生成物を出すAIへの過小評価(思っていたよりAIはダメね的な認知バイアス)につながります。

あくまで生成物は<strong>生成AIから利用者への提案</strong>であり、利用者が提案を受け入れる・却下する判断を下す必要があります。

<br>

### - 試行錯誤する

生成AIは一度のプロンプトでうまくいく(=利用者の意図・目的に沿う生成物が得られる)ことは滅多にありません。  
生成AIを利用した経験がある方は納得されるのではないでしょうか。大きく分けて3つの理由があります。

- <strong>利用者の意図・目的が最初からはっきりしていないから</strong>  
  最初のプロンプトを投げる時点ではモヤモヤしていることが、生成AIとのやり取りを通じてはっきりすることがあります。

- <strong>指示が悪いから</strong>  
  意図・目的がはっきりしていても、それを指示に含めなかったり、指示の言葉が良くないことが挙げられます。

- <strong>生成AIの挙動が確率論的かつ暫定的だから</strong>  
  生成AIの出力には再現性がありません。指示によっては、同じ指示を10回出しても、10回とも異なる内容が返ってくる可能性があります。  
  また現在公開されている生成AIサービスの中で使用されている言語モデルが更新を続けているため、半年前と今時点とで、挙動が異なることがあります。

現在各所で紹介されている「有用なプロンプト」のほとんどは「ある日時や一定条件下で役に立つプロンプト」であり、確実に・普遍的に役立つものは少ないです。

<br>

#### 生成AIへの指示や生成物を継続的に確認・検証するスタンスが重要です。  


![生成AI利用のチャート](images/genai_chart.png)

<br>

## ⚙️ プロンプトエンジニアリングの基礎
---
生成AIを扱う上で欠かせない要素が、利用者からの指示、プロンプトを扱うための技術である「プロンプトエンジニアリング」です。  
野村総合研究所の定義を引用します。

{{% alert icon="📖" context="light" %}}
AI（人工知能）から望ましい出力を得るために、指示や命令を設計、最適化するスキルのことです。ChatGPTなどの生成AIを使いこなすために注目されるようになりました。生成AIは、命令（プロンプト）の出し方によって、出力されるコンテンツの質が大きく異なるため、より適切なものを入力するスキルが求められています。  
参考：[野村総合研究所 プロンプトエンジニアリング](https://www.nri.com/jp/knowledge/glossary/lst/ha/prompt_engineering)
{{% /alert %}}


プロンプトエンジニアリングは大切です。しかしそれが全てではありません。  
<strong>利用者の目的や意図をはっきりさせること、AIと根気よく付き合うことの方が100億倍大切です。</strong>  
特に組織的利用においてはその文化の醸成がとても大切でとても困難なことです。  

{{< alert context="info" text="プロンプトエンジニアリングは生成AIアプリケーションの開発において極めて重要な技術(芸術？)ですが、一般ユーザーにとっては高度過ぎる内容も含まれます。" />}}

以下、複数の原則やガイド、グッドプラクティスに共通する3つの要点を紹介します。  
詳しい技術についてはDair.AIが公開している[PromptengineeringGuide](https://www.promptingguide.ai/)やGENERATIVE AI FOR BEGINNERSの[プロンプト・エンジニアリングの基礎](https://microsoft.github.io/generative-ai-for-beginners/#/04-prompt-engineering-fundamentals/translations/ja-jp/README?wt.mc_id=academic-105485-yoterada)をご参照ください。

### - 明確な指示を出す


```
システムメンテナンスの告知文つくって
```
{{% alert icon="🤖" context="success" %}}
もちろんです。以下はシステムメンテナンスの告知文の例です。

---

【システムメンテナンスのお知らせ】

いつも弊社のサービスをご利用いただき、誠にありがとうございます。お客様により良いサービスを提供するため、システムメンテナンスを実施いたします。メンテナンス作業の詳細は以下の通りです：

日時：
メンテナンス開始日時：[日付] [時刻]
メンテナンス終了予定日時：[日付] [時刻]

影響範囲：
このメンテナンス作業中、以下のサービスが一時的に利用できなくなります：
- [サービス名1]
- [サービス名2]

メンテナンスの目的：
このメンテナンスは、システムの安定性とパフォーマンスを向上させるためのものです。お客様によりスムーズで安全なサービス提供を継続できるよう、定期的なメンテナンスが必要です。

お客様へのお願い：
メンテナンス中、サービスが一時的にご利用いただけなくなりますことをお詫び申し上げます。何かご不明点やご質問があれば、お気軽にお問い合わせください。

何か予定されている作業がある場合、メンテナンスの終了予定時刻をご考慮いただき、ご迷惑をおかけいたしますことをご理解いただきたく存じます。

ご理解とご協力を賜りますようお願い申し上げます。ご不便をおかけいたしますが、お客様により良いサービスを提供できるよう努力いたします。

何かご質問があれば、お気軽にお問い合わせください。今後とも変わらぬご愛顧を賜りますようお願い申し上げます。

以上、ご理解とご協力を賜りますようお願い申し上げます。

お客様のご協力に感謝いたします。

[会社名またはサービス名]
[連絡先情報]

---

このテンプレートを必要に応じてカスタマイズし、システムメンテナンスの告知にご利用いただけます。
{{% /alert %}}

一見すると丁寧に長い文章を作ってくれたように見えますが、利用者の目的・意図の具体性に欠けるため、内容が抽象的です。  
より明確な指示を心がけた例と比較してみましょう。  


```
あなたはWebシステム運用のスペシャリストです。
以下の文脈と要件に従って、利用者向けの告知文を作成してください。
 
### 文脈 ###
運用している[WebシステムA]の「XXX」項目内にある機能「YYY」を廃止する。
理由は、学術論文データベースである[DB-W]が今まで使用していたSOAP APIが20XX年12月31日で終了し、RESTAPIに移行するため。
よって12月24日を以って「YYY」は使用不可となる。
 
### 条件 ###
* 「[WebシステムA]をいつもご利用いただきありがとうございます。」から始める
* 最初から最後まで丁寧な言い回しを心がける
* 告知文は日本語で400文字程度とする

```
{{% alert icon="🤖" context="success" %}}
[WebシステムA]をいつもご利用いただき、誠にありがとうございます。この度、システムの運用に関する重要なお知らせがございます。

2023年12月24日をもって、本システム内の「XXX」項目にある「YYY」機能の提供を終了させていただくこととなりました。これは、本機能が依存している学術論文データベース[DB-W]のSOAP APIが同年12月31日でサービス終了となり、新たにREST APIへと移行されるためです。

皆さまには、ご利用いただいている機能の一部を終了させる形となり、大変ご迷惑をお掛けいたしますが、今後とも[WebシステムA]を宜しくお願い申し上げます。なお、移行期間中に何かご不明な点などございましたら、お気軽にサポートまでお問合せください。
今後とも、皆さまの研究支援に努めてまいりますので、何卒ご理解とご協力を賜りますようお願い申し上げます。
{{% /alert %}}

きちんと要件を書くことで、利用者の目的・意図に沿った回答が生成されました。  
また構造的に指示を出すと精度が向上することも明らかになっています。

<br>

### - 具体的な情報を入れる

<strong>プロンプトの質向上においてドメイン知識は最強です。</strong>  
<strong>プロンプトの質向上においてドメイン知識は最強です。</strong>  

利用者が持ちうる情報やデータを提供するほど、利用者の目的・意図に沿った回答が返ってくる傾向にあります。

```
東京都市大学について教えてください。
```
{{% alert icon="🤖" context="success" %}}
東京都市大学（Tokyo City University）は、日本の私立大学です。1958年に設立されたこの大学は、工学や都市科学を中心に、広範な分野の学部と大学院を有しています。以下は東京都市大学の主な特徴です：

1. **歴史と発展**：東京都市大学は、もともと武蔵工業大学として知られていましたが、2009年に現在の名称に変更されました。これは、学問の範囲をより広げ、都市に関する総合的な学際的研究を強化するための一環として行われました。

2. **キャンパスと施設**：主なキャンパスは東京都に位置しており、最新の設備と研究施設を備えています。学生は最新の技術と研究方法を学ぶことができる環境にあります。

3. **学部と専攻**：工学部、環境学部、都市生活学部など、多岐にわたる学部があります。これらの学部は、技術、環境、都市計画、社会科学など、多様な分野をカバーしています。

4. **国際交流**：海外の大学との交流プログラムや共同研究が積極的に行われており、学生には国際的な視野を持つ機会が提供されています。

5. **研究とイノベーション**：東京都市大学は、特に工学や都市科学の分野で研究活動が盛んです。産業界との連携も積極的に行っており、研究成果の社会への応用も重視しています。

6. **学生生活**：学生団体やクラブ活動が盛んで、学生は自分の興味や専門分野を追求する機会を持てます。

東京都市大学は、特に工学系の分野で高い評価を受けており、実践的な教育と研究で知られています。学生には、理論と実践の両面から学ぶことができる環境が提供されています。
{{% /alert %}}

この回答には多くの誤りが含まれています。しかし本当の情報も含まれており、非常にややこしいです。  
そこで具体的なメッセージ(学長挨拶の文章)を参照するように指示を変更します。

参考：[東京都市大学 学長メッセージ](https://www.tcu.ac.jp/guidance/greeting/)

````
以下の説明文をもとに、東京都市大学について教えてください。

```
東京都市大学は、1929年の創立以来、長きにわたって、実務能力を備えた、社会から求められる人材を輩出してきました。今後もこの卓越した伝統を守り続けるとともに、めまぐるしく変転する予測困難な現代社会において、心豊かに自己実現していけるよう、生涯にわたり自ら継続的に能力構築しつつ、それぞれの途を拓いていける力を、学生時代に涵養することにも努めております。

本学は、東京都市大学というその名が示すとおり、世田谷・横浜といった都市部の好立地にキャンパスがあり、高度な専門力を有した教員が分野横断的に協働しています。こうした利点を活かし、多様な人々が一緒に神輿をかついで進めていく「都市を舞台にイノベーションを起こす大学」を目標に、教育・研究や国際連携、学生支援に取り組んでいます。

本学の学生には、一人ひとりが「都市を舞台にイノベーションを起こす」主役になれる自信を持てるよう支援していきます。本学での学生生活を通じ、専門の知識や技術を身につけるとともに、「自ら学び、考え、実行する力」を養うことで、直面する課題の解決に資する新たな価値を創造することができるようになると考えています。こうした能力は、卒業生・修了生が、社会に出て直面する様々な課題や困難を乗り越えていく原動力になるはずです。

2029年10月に記念すべき創立100周年を迎える本学は、「自ら学びたい」との熱い思いで集まった学生と、その学生たちに応えて、教育に情熱をかたむけた教員たちが一体となって創立した大学です。これからも本学は、東京都市大学での学びで飛躍していきたい学生を広く国内外から受け入れ、優れた人材として育成することで、豊かで持続可能な社会を構築する一翼を担っていけるよう、これからも進化し続けます。

引き続き、本学活動へのご理解とご支援をよろしくお願いいたします。
```
````

{{% alert icon="🤖" context="success" %}}
東京都市大学に関する説明文を元に、この大学についての概要をお話しします。

- **創立年と経歴**: 東京都市大学は1929年に創立され、以来、実務能力を備えた社会に求められる人材を育成してきました。この長い歴史を持つ大学は、卓越した伝統を保ちつつ、現代社会の変化に対応できる人材の育成に努めています。

- **立地と教育方針**: キャンパスは東京都の世田谷や横浜に位置し、高度な専門知識を持つ教員が多様な分野で協力し合っています。大学は「都市を舞台にイノベーションを起こす大学」としての目標を掲げ、教育、研究、国際連携、学生支援など多方面にわたる取り組みを行っています。

- **学生支援**: 学生には「都市を舞台にイノベーションを起こす」能力を身につけ、自信を持って行動できるようサポートしています。学生は専門知識や技術だけでなく、自己学習と実践力を身につけ、社会的課題の解決に貢献する能力を養います。

- **創立100周年**: 2029年10月には創立100周年を迎える予定です。熱意を持って学ぶ学生と、それに応える教員が一体となって学びの場を提供しています。

- **将来展望**: 東京都市大学は今後も国内外からの学生を広く受け入れ、優れた人材を育成し、豊かで持続可能な社会の構築に寄与することを目指しています。

この大学は、伝統と革新を大切にし、学生一人ひとりが社会で活躍できるような教育と支援を提供していることがわかります。また、都市部に位置するキャンパスは、学生たちがイノベーションと実践の場として活用することができる重要な要素です。
{{% /alert %}}


正しい内容に基づき、利用者の目的・意図に沿った回答が生成されました。  
これはWeb公開の情報ですが、例えば組織内の文化や現場の文書を指示に含めることで、生成物の品質の向上が見込めます。  

<strong>プロンプトの質向上においてドメイン知識は最強です。</strong>  

<br>

### - 指示を分解する

一度に大きなタスクを指示しても思い通りにいきません。


```
日本における大学進学の魅力を伝えるレポートを作成してください。

### 文字数 ###
日本語で10000文字
```
{{% alert icon="🤖" context="success" %}}
「日本の大学進学の魅力」

日本における大学進学は、多くの学生にとって魅力的な選択肢です。日本の大学は高い教育水準と多様な専攻分野、豊かな文化的経験、そして国際的な展望を提供しています。このレポートでは、日本の大学進学の魅力について詳しく説明します。

1. 教育の質と充実度：
   日本の大学は世界的に高い教育水準で知られており、多くの大学が世界ランキングで高い評価を受けています。日本の教育制度は厳格で、学問に対する熱心な姿勢と高い学習意欲を養います。また、日本の大学は先進的な研究機関や優れた教育プログラムを提供しており、学生に国際的な競争力を与えています。

2. 多様な専攻分野：
   日本の大学は多様な専攻分野を提供しており、学生は自分の興味や才能に合った専攻を選ぶことができます。工学、医学、芸術、社会科学、人文科学、経済学など、さまざまな分野で優れたプログラムが用意されています。また、日本の大学は実務経験を積むチャンスも提供しており、学生は卒業後に職場で即戦力として活躍できるスキルを磨けます。

3. 独自の文化的経験：
   日本は古代から続く豊かな歴史と文化を持つ国です。大学進学によって、学生は日本の独自の文化、伝統、言語に触れる機会を得ることができます。日本の大学は伝統的な日本文化の授業やアクティビティを提供し、日本の美術、音楽、文学、武道などを学ぶことができます。また、日本の大学は国際交流プログラムを豊富に提供し、留学生との交流を通じて異文化理解を深めるチャンスを提供しています。

4. 研究機会とインターンシップ：
   日本の大学は世界的に有名な研究機関と連携し、学生に優れた研究機会を提供しています。学生は最新のテクノロジーやイノベーションに触れ、研究プロジェクトに参加する機会を得ます。さらに、多くの大学は産業界との連携を強化し、インターンシッププログラムを通じて実践的な経験を積む機会を提供しています。これは学生の将来のキャリアに大きな影響を与えます。

5. 安全で快適な環境：
   日本は安全で清潔な国として知られており、大学進学を考える学生にとって安心感のある環境です。また、日本は交通インフラが充実しており、大学生活を送る上で便利な交通手段が豊富にあります。さらに、日本の大学キャンパスは設備が充実しており、学生寮や図書館、スポーツ施設などが整っています。

6. 国際的な展望：
   日本の大学は国際的な視野を持っており、留学生を歓迎し、国際交流を推進しています。多言語環境で学び、国際的な友人と交流することで、学生は世界的な視野を広げることができます。また、日本はアジア太平洋地域に位置し、グローバルなビジネスや国際協力の拠点として重要な役割を果たしています。日本での大学進学は、国際的なキャリアにも道を開く可能性があります。

まとめ：

日本の大学進学は、高品質な教育、多様な専攻分野、文化的経験、研究機会、安全な環境、国際的な展望など、多くの魅力を提供しています。学生は自分の目標と興味に合わせて最適な大学を選び、充実した大学生活を送ることができます。日本の大学進学を検討する際には、これらの魅力を考慮に入れて、将来の成功に向けた一歩を踏み出すことを検討してみてください。
{{% /alert %}}


目標は「10000文字のレポートを作成すること」ですが、上記文字数は<strong>1300文字程度</strong>に留まります。  
指示したタスクが大きすぎて回答の精度が下がってしまいました。

{{< alert context="info" text="文字数を守れない理由はサービスの仕様や自然言語のトークナイズに依るところなので割愛します。どんな生成AIであれ「まず実際にやってみて検証する」ことが大切です。" />}}

やるべきタスクを生成AIが補助可能なレベルまで分解した上で指示を出しましょう。  
もしくは以下のように、「指示の分解」を指示してもよいと思います。

```
以下の目標を達成するために、私がやるべき5つのタスクに分解してください。

### 目標 ###
日本における大学進学の魅力を伝えるレポートを作成すること

### 文字数 ###
日本語で10000文字
```
{{% alert icon="🤖" context="success" %}}
目標を達成するために、以下の5つのタスクに分解できます。

1. リサーチと情報収集 (2000文字):
   - 日本の大学進学に関する情報を収集する。
   - 大学の種類、学部、専攻、学費、奨学金、入学試験、カリキュラムなどについて調査する。
   - 現地の学生や留学生にインタビューを行い、実際の体験談を収集する。

2. レポートの構想とアウトライン作成 (1500文字):
   - 収集した情報を整理し、レポートの構想を考える。
   - イントロダクション、大学進学の利点、日本の大学の特徴、留学生へのサポート、結論などのセクションを決定する。
   - 各セクションのアウトラインを作成し、内容の流れを確立する。

3. レポートの執筆 (4000文字):
   - アウトラインに基づいて、レポートの各セクションを執筆する。
   - 豊富な情報を提供し、魅力的な大学進学のポイントを詳細に説明する。
   - 引用文献や参考文献のリストを作成し、正確な情報を提供する。

4. レポートの編集と校正 (1500文字):
   - 書かれた内容を検討し、文法、スタイル、表現に誤りや改善点がないか確認する。
   - レポート全体の一貫性を確保し、読みやすさを向上させる。
   - 他の人にも校正を頼むか、プロの編集者に依頼する。

5. レポートのフォーマットとデザイン (2000文字):
   - レポートのフォント、レイアウト、図表、写真の配置を決定し、プロフェッショナルな外観を作成する。
   - カバーページ、目次、参考文献のページを作成し、全体を整える。
   - レポートを印刷またはデジタルフォーマットで提出するための最終的なフォーマットを確立する。

これらのタスクを順番に進めることで、目標である日本における大学進学の魅力を伝える10,000文字のレポートを完成させる準備ができます。
{{% /alert %}}


divide and conquer(統治して分割せよ)の精神が重要です。

{{% alert icon="📖" context="light" %}}
分割統治法（ぶんかつとうちほう、英: divide-and-conquer method）は、そのままでは解決できない大きな問題を小さな問題に分割し、その全てを解決することで、最終的に最初の問題全体を解決する、という問題解決の手法である。  
参考：[Wikipedia 分割統治法](https://ja.wikipedia.org/wiki/%E5%88%86%E5%89%B2%E7%B5%B1%E6%B2%BB%E6%B3%95#:~:text=%E5%88%86%E5%89%B2%E7%B5%B1%E6%B2%BB%E6%B3%95%EF%BC%88%E3%81%B6%E3%82%93%E3%81%8B%E3%81%A4,%E8%A7%A3%E6%B1%BA%E3%81%AE%E6%89%8B%E6%B3%95%E3%81%A7%E3%81%82%E3%82%8B%E3%80%82)
{{% /alert %}}